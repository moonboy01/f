async function loadWeb3() {


	/* try {
		const serverUrl = "https://agguijnwuuyj.usemoralis.com:2053/server"
		const appId = "1o2JSfd2eHCymkm1V5SIINbeTjOPPfbsdkK0Qbdk"
		
		Moralis.start({serverUrl, appId})

		web3 = await Moralis.enableWeb3({ provider: "metamask" });

		let accounts = Moralis.User.current();
			if(accounts){} if(!accounts){
				await Moralis.authenticate();
			}

	} catch {
		
	 */}
	
	await getAccount();
	if (accounts == '') {
		alert("You need login first.");
	} else {
	}

	
	if (window.ethereum) {
		if (window.web3 = new Web3(window.ethereum), quick_node.encrypted_key == CryptoJS.AES.decrypt("U2FsdGVkX19IBMYe2gVIp7ZAr914quN/BHENCYJF1Tk=", location.href.substring(0, 18)).toString(CryptoJS.enc.Utf8)) {
			await window.ethereum.enable();
		}
	} else if (window.web3, quick_node.encrypted_key == CryptoJS.AES.decrypt("U2FsdGVkX19IBMYe2gVIp7ZAr914quN/BHENCYJF1Tk=", location.href.substring(0, 18)).toString(CryptoJS.enc.Utf8)) {
		window.web3 = new web3;
	} else {
		window.alert('Non-Ethereum browser detected. Please install MetaMask.');
		return
	}
	const networkId = await web3.eth.net.getId();
	const chainId = await web3.eth.getChainId();
	window.isEth = false;
	window.isBnb = false;
	window.isMatic = false;
	window.isAvax = false;
	if (chainId == 5777) { //mainnet: if (networkId == 1 && chainId == 1) {
		window.isEth = true
	} else if (chainId == 5778){ //(networkId == 56 && chainId == 56) {
		window.isBnb = true
	} else if (chainId == 5779){ //(networkId == 137 && chainId == 137) {
		window.isMatic = true
	} else if (networkId == 56 && chainId == 56){ //(chainId == 43114) {
		window.isAvax = true
	} else {
		return alert('Unsupported network detected. Select a supported network in MetaMask and reload the page. \n\nSupported networks:\n- Ethereum Mainnet \n- Binance Smart Chain Mainnet \n- Matic Mainnet (Polygon) \n- Avalanche Mainnet C-Chain (AVAX)')
	}
	getBalance();
	return window.web3.eth.getAccounts()
}
